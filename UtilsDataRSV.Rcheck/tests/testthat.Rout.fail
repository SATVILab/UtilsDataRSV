
R version 4.5.2 (2025-10-31) -- "[Not] Part in a Rumble"
Copyright (C) 2025 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> library(testthat)
> library(UtilsDataRSV)
> 
> test_check("UtilsDataRSV")
[ FAIL 4 | WARN 0 | SKIP 0 | PASS 18 ]

══ Failed tests ════════════════════════════════════════════════════════════════
── Error ('test-cross_df_safe.R:6:3'): cross_df_safe works ─────────────────────
<packageNotFoundError/error/condition>
Error in `loadNamespace(x)`: there is no package called 'purrr'
Backtrace:
     ▆
  1. ├─testthat::expect_identical(...) at test-cross_df_safe.R:6:3
  2. │ └─testthat::quasi_label(enquo(object), label, arg = "object")
  3. │   └─rlang::eval_bare(expr, quo_get_env(quo))
  4. ├─UtilsDataRSV:::get_cols_to_protect(to_cross_list)
  5. │ └─... %>% which()
  6. ├─base::which(.)
  7. └─base::loadNamespace(x)
  8.   └─base::withRestarts(stop(cond), retry_loadNamespace = function() NULL)
  9.     └─base (local) withOneRestart(expr, restarts[[1L]])
 10.       └─base (local) doWithOneRestart(return(expr), restart)
── Error ('test-cross_df_safe.R:78:1'): (code run outside of `test_that()`) ────
<packageNotFoundError/error/condition>
Error in `loadNamespace(x)`: there is no package called 'purrr'
Backtrace:
    ▆
 1. ├─UtilsDataRSV::cross_df_safe(to_cross_list_list) at test-cross_df_safe.R:78:1
 2. │ └─UtilsDataRSV:::get_cols_to_protect(.l)
 3. │   └─... %>% which()
 4. ├─base::which(.)
 5. └─base::loadNamespace(x)
 6.   └─base::withRestarts(stop(cond), retry_loadNamespace = function() NULL)
 7.     └─base (local) withOneRestart(expr, restarts[[1L]])
 8.       └─base (local) doWithOneRestart(return(expr), restart)
── Error ('test-filter_based_on_mean_grp_value.R:3:3'): filter_based_on_mean_grp_value works ──
<dplyr:::mutate_error/rlang_error/error/condition>
Error in `dplyr::mutate(., resp = purrr::map_dbl(type_base, function(x) {
    round(rnorm(1, 5 + stringr::str_detect(x, "b") * 3), 2)
})[1])`: i In argument: `resp = ...[]`.
i In group 1: `pid = "id1"` `type_base = "a"`.
Caused by error in `loadNamespace()`:
! there is no package called 'purrr'
Backtrace:
     ▆
  1. ├─... %>% ... at test-filter_based_on_mean_grp_value.R:3:3
  2. ├─dplyr::mutate(...)
  3. ├─dplyr::ungroup(.)
  4. ├─dplyr::mutate(...)
  5. ├─dplyr:::mutate.data.frame(...)
  6. │ └─dplyr:::mutate_cols(.data, dplyr_quosures(...), by)
  7. │   ├─base::withCallingHandlers(...)
  8. │   └─dplyr:::mutate_col(dots[[i]], data, mask, new_columns)
  9. │     └─mask$eval_all_mutate(quo)
 10. │       └─dplyr (local) eval()
 11. ├─base::loadNamespace(x)
 12. │ ├─base::withRestarts(stop(cond), retry_loadNamespace = function() NULL)
 13. │ │ └─base (local) withOneRestart(expr, restarts[[1L]])
 14. │ │   └─base (local) doWithOneRestart(return(expr), restart)
 15. │ └─base::stop(cond)
 16. └─dplyr (local) `<fn>`(`<pckgNtFE>`)
 17.   └─rlang::abort(message, class = error_class, parent = parent, call = error_call)
── Error ('test-install_project_dependencies.R:2:3'): install_project_dependencies works ──
<subscriptOutOfBoundsError/error/condition>
Error in `fn[file.exists(fn)][[1]]`: subscript out of bounds
Backtrace:
    ▆
 1. └─UtilsDataRSV:::install_project_dependencies() at test-install_project_dependencies.R:2:3

[ FAIL 4 | WARN 0 | SKIP 0 | PASS 18 ]
Error: Test failures
Execution halted
